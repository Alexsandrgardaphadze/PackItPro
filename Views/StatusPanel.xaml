<UserControl x:Class="PackItPro.Views.StatusPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:PackItPro.Views"
             mc:Ignorable="d" 
             d:DesignHeight="100" d:DesignWidth="800">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <!-- Status Message Area (Default) -->
        <Border Grid.Row="0"
                x:Name="StatusMessageArea"
                Background="{StaticResource AppPanelColor}"
                CornerRadius="6"
                Padding="12,10"
                Margin="0,0,0,8">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="4"/>
                </Grid.RowDefinitions>
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock x:Name="StatusMessageTextBlock"
                               Text="Ready to pack files. Add files to continue."
                               Foreground="{StaticResource AppTextSecondaryColor}"
                               FontFamily="Consolas"
                               FontSize="12"
                               VerticalAlignment="Center"/>
                    <TextBlock x:Name="ProgressPercentTextBlockInline"
                               Text="0%"
                               Foreground="{StaticResource AppTextTertiaryColor}"
                               FontFamily="Consolas"
                               FontSize="11"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Center"
                               Visibility="Collapsed"/>
                    <Button x:Name="PackButton"
                            Grid.Column="1"
                            Content="Pack Now"
                            Style="{StaticResource Win11Button}"
                            Height="36"
                            FontSize="14"
                            Click="PackNow_Click"
                            IsEnabled="False"
                            Width="395"
                            Margin="10,0,5,0"/>
                </Grid>
                <ProgressBar Grid.Row="1"
                             x:Name="ProcessingProgressBar"
                             Height="4"
                             Minimum="0"
                             Maximum="100"
                             Value="0"
                             Foreground="{StaticResource AppPrimaryColor}"
                             Background="Transparent"
                             VerticalAlignment="Bottom"
                             Visibility="Collapsed"
                             Style="{StaticResource RoundedProgressBarStyle}"/>
            </Grid>
        </Border>
        <!-- Error Panel (Overlays the Status Message Area) -->
        <Border Grid.Row="0"
                x:Name="ErrorPanel"
                Background="{StaticResource AppStatusErrorColor}"
                CornerRadius="8"
                Padding="14,12"
                Margin="0,8,0,8"
                Visibility="Collapsed">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="⚠️" FontSize="16" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <TextBlock Grid.Column="1" x:Name="ErrorMessageTextBlock" Text="Error message will appear here" Foreground="White" FontSize="12" TextWrapping="Wrap" VerticalAlignment="Center"/>
                <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="10,0,0,0">
                    <Button x:Name="RetryButton" Content="Retry" Click="Retry_Click" Style="{StaticResource Win11Button}" Height="26" Padding="12,4" FontSize="11" Margin="0,0,6,0" Visibility="Collapsed"/>
                    <Button x:Name="DismissErrorButton" Content="✕" Click="DismissError_Click" Background="Transparent" Foreground="{StaticResource AppTextTertiaryColor}" BorderThickness="0" Height="26" Width="26" FontSize="14" FontWeight="Bold" Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button" BasedOn="{StaticResource Win11Button}">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="3">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="{StaticResource AppBorderColor}"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
        <!-- Bottom Progress Bar -->
        <ProgressBar Grid.Row="1"
                     x:Name="ProcessProgressBar"
                     Height="6"
                     Minimum="0"
                     Maximum="100"
                     Value="0"
                     Foreground="{StaticResource AppPrimaryColor}"
                     Background="#3A3A4D"
                     Style="{StaticResource RoundedProgressBarStyle}"/>
        <TextBlock Grid.Row="1"
                   x:Name="ProgressPercentTextBlock"
                   Text="0%"
                   Foreground="{StaticResource AppTextSecondaryColor}"
                   Margin="8,0,0,0"
                   FontFamily="Consolas"
                   VerticalAlignment="Center"/>
    </Grid>
</UserControl>